<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Admin - TechHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { 50:'#eef2ff',100:'#e0e7ff',200:'#c7d2fe',300:'#a5b4fc',400:'#818cf8',500:'#6366f1',600:'#4f46e5',700:'#4338ca',800:'#3730a3',900:'#312e81',950:'#1e1b4e' },
                        accent: { 50:'#fdf4ff',100:'#fae8ff',200:'#f5d0fe',300:'#f0abfc',400:'#e879f9',500:'#d946ef',600:'#c026d3',700:'#a21caf',800:'#86198f',900:'#701a75' }
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100 font-sans min-h-screen">

    <!-- Top Nav -->
    <nav class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-gray-800 sticky top-0 z-30">
        <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <a href="admin-dashboard.html" class="text-gray-500 hover:text-primary-500 transition-colors"><i class="fas fa-arrow-left"></i></a>
                <h1 class="text-lg font-bold">Manage Admins</h1>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="toggleDarkMode()" class="w-9 h-9 flex items-center justify-center rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i class="fas fa-moon dark:hidden text-sm"></i><i class="fas fa-sun hidden dark:inline text-sm"></i>
                </button>
                <a href="admin-dashboard.html" class="px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-primary-500 rounded-xl transition-colors">
                    <i class="fas fa-chart-line mr-1"></i> Dashboard
                </a>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 py-6 lg:py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Create Admin Form -->
            <div class="bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm p-6">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center">
                        <i class="fas fa-user-plus text-primary-500"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold">Create New Admin</h2>
                        <p class="text-xs text-gray-500">Add a new admin account</p>
                    </div>
                </div>

                <div id="create-message" class="hidden mb-4 px-4 py-3 rounded-xl text-sm font-medium"></div>

                <form id="create-admin-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                        <div class="relative">
                            <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="text" id="admin-name" required class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" placeholder="Admin Name">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="email" id="admin-email" required class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" placeholder="admin@email.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <div class="relative">
                            <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="password" id="admin-password" required minlength="6" class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" placeholder="Min 6 characters">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
                        <div class="relative">
                            <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="password" id="admin-confirm-password" required class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" placeholder="Repeat password">
                        </div>
                    </div>
                    <button type="submit" class="w-full py-3 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-medium rounded-xl shadow-lg shadow-primary-500/25 transition-all flex items-center justify-center gap-2">
                        <i class="fas fa-user-plus"></i> Create Admin
                    </button>
                </form>
            </div>

            <!-- Admin List -->
            <div class="bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm p-6">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                        <i class="fas fa-users-cog text-green-500"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold">Admin Accounts</h2>
                        <p class="text-xs text-gray-500">Current admin users</p>
                    </div>
                </div>
                <div id="admin-list" class="space-y-3">
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        function verifyAdminAccess() {
            const currentAdmin = localStorage.getItem('current_admin');
            if (!currentAdmin) {
                const password = prompt('Enter Master Admin Password:');
                if (password !== 'moheidin2015') {
                    alert('Incorrect password! Access denied.');
                    window.location.href = 'index.html';
                    return;
                }
            }
        }
        verifyAdminAccess();

        function initializeAdminAccounts() {
            const admins = JSON.parse(localStorage.getItem('techhub_admins') || '[]');
            if (admins.length === 0) {
                admins.push({ id: 1, email: 'admin@techhub.com', password: 'admin123', name: 'Default Admin', createdAt: new Date().toISOString() });
                localStorage.setItem('techhub_admins', JSON.stringify(admins));
            }
        }
        initializeAdminAccounts();

        function loadAdminList() {
            const admins = JSON.parse(localStorage.getItem('techhub_admins') || '[]');
            const list = document.getElementById('admin-list');
            if (admins.length === 0) {
                list.innerHTML = '<p class="text-center text-gray-500 py-8">No admin accounts found</p>';
                return;
            }
            list.innerHTML = admins.map(admin => `
                <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold text-sm">
                            ${(admin.name || admin.email).charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <p class="font-medium text-sm">${admin.name || 'Admin'}</p>
                            <p class="text-xs text-gray-500">${admin.email}</p>
                        </div>
                    </div>
                    <button onclick="deleteAdmin(${admin.id})" class="w-8 h-8 flex items-center justify-center rounded-lg text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors" title="Delete">
                        <i class="fas fa-trash text-xs"></i>
                    </button>
                </div>
            `).join('');
        }

        document.getElementById('create-admin-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('admin-name').value.trim();
            const email = document.getElementById('admin-email').value.trim();
            const password = document.getElementById('admin-password').value;
            const confirmPassword = document.getElementById('admin-confirm-password').value;

            if (!email.includes('@')) { showMessage('Please enter a valid email', 'error'); return; }
            if (password.length < 6) { showMessage('Password must be at least 6 characters', 'error'); return; }
            if (password !== confirmPassword) { showMessage('Passwords do not match', 'error'); return; }

            const admins = JSON.parse(localStorage.getItem('techhub_admins') || '[]');
            if (admins.find(a => a.email === email)) { showMessage('An admin with this email already exists', 'error'); return; }

            admins.push({ id: Date.now(), email, password, name, createdAt: new Date().toISOString() });
            localStorage.setItem('techhub_admins', JSON.stringify(admins));

            showMessage('Admin account created successfully!', 'success');
            this.reset();
            loadAdminList();
        });

        function deleteAdmin(id) {
            const admins = JSON.parse(localStorage.getItem('techhub_admins') || '[]');
            if (admins.length <= 1) { showMessage('Cannot delete the last admin account!', 'error'); return; }
            if (!confirm('Are you sure you want to delete this admin?')) return;
            const updated = admins.filter(a => a.id !== id);
            localStorage.setItem('techhub_admins', JSON.stringify(updated));
            loadAdminList();
            showMessage('Admin deleted successfully', 'success');
        }

        function showMessage(msg, type) {
            const el = document.getElementById('create-message');
            el.textContent = msg;
            el.classList.remove('hidden');
            el.className = `mb-4 px-4 py-3 rounded-xl text-sm font-medium ${type === 'success' ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800' : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800'}`;
            setTimeout(() => { el.classList.add('hidden'); }, 4000);
        }

        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark').toString());
        }
        if (localStorage.getItem('darkMode') === 'true') document.documentElement.classList.add('dark');

        loadAdminList();
    </script>
</body>
</html>
